<!DOCTYPE html><html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø£Ø¯Ø§Ø© Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© - Binance</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      direction: rtl;
      background-color: #0f172a;
      color: #f1f5f9;
      padding: 20px;
    }
    .tool-container {
      max-width: 600px;
      margin: auto;
      background: #1e293b;
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 0 25px rgba(0,0,0,0.3);
    }
    select, button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      box-sizing: border-box;
    }
    select {
      background: #334155;
      color: #fff;
    }
    button {
      background-color: #3b82f6;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #2563eb;
    }
    .result, .stats {
      margin-top: 20px;
      background: #0f172a;
      padding: 15px;
      border-radius: 12px;
      border: 1px solid #475569;
    }
    .live-data {
      font-size: 14px;
      margin-top: 15px;
      background: #334155;
      padding: 10px;
      border-radius: 10px;
    }
    .status {
      margin-top: 10px;
      font-size: 14px;
    }
    .status span {
      font-weight: bold;
    }
    .correct-wrong-btns button {
      margin-top: 10px;
      width: 49%;
    }
  </style>
</head>
<body>
  <div class="tool-container">
    <h2>ğŸ“Š Ø£Ø¯Ø§Ø© Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</h2><label for="pair">ğŸ”½ Ø§Ø®ØªØ± Ø²ÙˆØ¬ Ø§Ù„Ø¹Ù…Ù„Ø©:</label>
<select id="pair">
  <option value="btcusdt">BTC/USDT</option>
  <option value="ethusdt">ETH/USDT</option>
  <option value="bnbusdt">BNB/USDT</option>
  <option value="solusdt">SOL/USDT</option>
  <option value="xrpusdt">XRP/USDT</option>
</select>

<button onclick="analyzeCandle()">ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ù…Ø¹Ø©</button>

<div class="status" id="connectionStatus">ğŸ”Œ Ø§Ù„Ø­Ø§Ù„Ø©: <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span></div>
<div class="live-data" id="liveData">ğŸ“¡ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†...</div>
<div class="result" id="result" style="display:none;"></div>

<div class="correct-wrong-btns">
  <button onclick="recordStat(true)" style="background-color: #10b981;">âœ… Ø§Ù„ØªÙˆÙ‚Ø¹ ÙƒØ§Ù† ØµØ­ÙŠØ­</button>
  <button onclick="recordStat(false)" style="background-color: #ef4444;">âŒ Ø§Ù„ØªÙˆÙ‚Ø¹ ÙƒØ§Ù† Ø®Ø§Ø·Ø¦</button>
</div>

<div class="stats" id="statsBox">
  <h4>ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ:</h4>
  <p>âœ… ØµØ­ÙŠØ­Ø©: <span id="correctCount">0</span></p>
  <p>âŒ Ø®Ø§Ø·Ø¦Ø©: <span id="wrongCount">0</span></p>
  <p>ğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: <span id="accuracy">0</span>%</p>
</div>

  </div>  <script>
    let socket;
    let latestCandle;
    const connStatus = document.getElementById("connectionStatus").querySelector("span");
    const liveDataBox = document.getElementById("liveData");

    function connectWebSocket(pair) {
      if (socket) socket.close();
      const url = `wss://stream.binance.com:9443/ws/${pair}@kline_5m`;
      socket = new WebSocket(url);

      socket.onopen = () => {
        connStatus.textContent = "ğŸŸ¢ Ù…ØªØµÙ„";
        connStatus.style.color = "#10b981";
      };

      socket.onclose = () => {
        connStatus.textContent = "ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„";
        connStatus.style.color = "#ef4444";
      };

      socket.onmessage = function (event) {
        const data = JSON.parse(event.data);
        if (data.k && !data.k.x) {
          latestCandle = data.k;
          const { o, c, h, l, v } = data.k;
          liveDataBox.innerHTML = `
            ğŸ•’ Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleTimeString()}<br>
            ğŸ“ˆ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚: ${parseFloat(c)}<br>
            ğŸ“‰ Ø§Ù„Ø§ÙØªØªØ§Ø­: ${parseFloat(o)}<br>
            ğŸ”¼ Ø§Ù„Ø£Ø¹Ù„Ù‰: ${parseFloat(h)}<br>
            ğŸ”½ Ø§Ù„Ø£Ø¯Ù†Ù‰: ${parseFloat(l)}<br>
            ğŸ” Ø§Ù„Ø­Ø¬Ù…: ${parseFloat(v).toFixed(2)}
          `;
        }
      };
    }

    function analyzeCandle() {
      const resultBox = document.getElementById("result");
      resultBox.style.display = "block";
      if (!latestCandle) {
        resultBox.innerHTML = "âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹. Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø«Ù… Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
        return;
      }

      const open = parseFloat(latestCandle.o);
      const close = parseFloat(latestCandle.c);
      const high = parseFloat(latestCandle.h);
      const low = parseFloat(latestCandle.l);
      const volume = parseFloat(latestCandle.v);

      let direction = "Ø´Ø±Ø§Ø¡";
      let confidence = 50;
      let reason = "";

      const body = Math.abs(close - open);
      const candleSize = high - low;
      const upperWick = high - Math.max(open, close);
      const lowerWick = Math.min(open, close) - low;

      if (close < open) {
        direction = "Ø¨ÙŠØ¹";
      }

      if (body / candleSize > 0.6) {
        confidence = 85;
        reason = "Ø¬Ø³Ù… Ø´Ù…Ø¹Ø© ÙƒØ¨ÙŠØ± ÙˆØ²Ø®Ù… Ù‚ÙˆÙŠ ÙÙŠ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ.";
      } else if (body / candleSize > 0.3) {
        confidence = 70;
        reason = "Ø´Ù…Ø¹Ø© Ù…ØªÙˆØ³Ø·Ø© ØªØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ø­ØªÙ…Ø§Ù„ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ø§ØªØ¬Ø§Ù‡.";
      } else {
        confidence = 55;
        reason = "Ø´Ù…Ø¹Ø© Ø¶Ø¹ÙŠÙØ© Ù…Ø¹ ØªØ°Ø¨Ø°Ø¨ØŒ Ø§Ø­ØªÙ…Ø§Ù„ Ø§Ù†Ø¹ÙƒØ§Ø³ Ø£Ùˆ ØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚.";
      }

      resultBox.innerHTML = `
        <strong>ğŸ”® Ø§Ù„Ø´Ù…Ø¹Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:</strong> ${direction}<br>
        <strong>ğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø©:</strong> ${confidence}%<br>
        <strong>ğŸ“Œ Ø§Ù„Ø³Ø¨Ø¨:</strong> ${reason}
      `;
    }

    function recordStat(correct) {
      let correctCount = parseInt(localStorage.getItem("correct") || "0");
      let wrongCount = parseInt(localStorage.getItem("wrong") || "0");

      if (correct) correctCount++;
      else wrongCount++;

      localStorage.setItem("correct", correctCount);
      localStorage.setItem("wrong", wrongCount);
      updateStats();
    }

    function updateStats() {
      const correct = parseInt(localStorage.getItem("correct") || "0");
      const wrong = parseInt(localStorage.getItem("wrong") || "0");
      const total = correct + wrong;
      const accuracy = total > 0 ? ((correct / total) * 100).toFixed(1) : 0;

      document.getElementById("correctCount").textContent = correct;
      document.getElementById("wrongCount").textContent = wrong;
      document.getElementById("accuracy").textContent = accuracy;
    }

    document.getElementById("pair").addEventListener("change", function () {
      latestCandle = null;
      connectWebSocket(this.value);
    });

    connectWebSocket(document.getElementById("pair").value);
    updateStats();
  </script></body>
</html>
